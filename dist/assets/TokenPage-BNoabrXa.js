import{g as l,s as m}from"./auth-BICLTMCl.js";import{m as d,s as _}from"./makeHttpReq-ep6UpiE5.js";import{d as h,g as k,o as p,c as g,u as y}from"./index-D2ziipwj.js";import"./App-BkH2lvXh.js";const R=h({__name:"TokenPage",setup(b){var s,c,a;const r=y(),n=(s=r.query)==null?void 0:s.code_verifier,i=(c=r.query)==null?void 0:c.userId,u=(a=r.query)==null?void 0:a.email;async function f(){const o=l();try{const t={grant_type:"authorization_code",client_id:"9c968b9c-f756-478a-8034-582dbf65fb6e",redirect_uri:"http://localhost:5173/callback",code_verifier:n,code:o==null?void 0:o.authorizationCode},e=await d("oauth/token","POST",t);m({user:{email:u,userId:i},token:{accessToken:e==null?void 0:e.access_token,refreshToken:e==null?void 0:e.refresh_token}}),window.location.href="/dashboard"}catch(t){_(t.message)}}return k(async()=>{await f()}),(o,t)=>(p(),g("h1",null,"callback"))}});export{R as default};
